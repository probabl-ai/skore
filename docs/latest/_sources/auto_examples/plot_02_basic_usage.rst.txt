
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/plot_02_basic_usage.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_examples_plot_02_basic_usage.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_plot_02_basic_usage.py:


.. _example_basic_usage:

===========
Basic usage
===========

This example complements the :ref:`example_getting_started` example and shows
some more functionalities.

.. GENERATED FROM PYTHON SOURCE LINES 13-15

Project and UI
--------------

.. GENERATED FROM PYTHON SOURCE LINES 17-33

.. code-block:: Python

    import altair as alt
    import io
    import matplotlib.pyplot as plt
    import numpy as np
    import pandas as pd
    import plotly.express as px
    import PIL

    from sklearn.datasets import load_diabetes
    from sklearn.linear_model import Lasso
    from sklearn.pipeline import Pipeline
    from sklearn.preprocessing import StandardScaler

    from skore import load
    from skore.item import MediaItem








.. GENERATED FROM PYTHON SOURCE LINES 34-36

Initialize a Project and launch the UI
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. GENERATED FROM PYTHON SOURCE LINES 38-47

.. code-block:: Python

    import subprocess

    # remove the skore project if it already exists
    subprocess.run("rm -rf my_project_bu.skore".split())

    # create the skore project
    subprocess.run("python3 -m skore create my_project_bu".split())






.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    CompletedProcess(args=['python3', '-m', 'skore', 'create', 'my_project_bu'], returncode=0)



.. GENERATED FROM PYTHON SOURCE LINES 48-53

.. code-block:: Python

    from skore import load

    my_project_bu = load("my_project_bu.skore")









.. GENERATED FROM PYTHON SOURCE LINES 54-58

Storing an integer
^^^^^^^^^^^^^^^^^^

Now, let us store our first object, for example an integer:

.. GENERATED FROM PYTHON SOURCE LINES 60-62

.. code-block:: Python

    my_project_bu.put("my_int", 3)








.. GENERATED FROM PYTHON SOURCE LINES 63-66

Here, the name of the object is ``my_int`` and the integer value is 3.

You can read it from the project:

.. GENERATED FROM PYTHON SOURCE LINES 68-70

.. code-block:: Python

    my_project_bu.get("my_int")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    3



.. GENERATED FROM PYTHON SOURCE LINES 71-72

Careful; like in a traditional Python dictionary, the ``put`` method will *overwrite* past data if you use a key which already exists!

.. GENERATED FROM PYTHON SOURCE LINES 74-76

.. code-block:: Python

    my_project_bu.put("my_int", 30_000)








.. GENERATED FROM PYTHON SOURCE LINES 77-78

Let us check the updated value:

.. GENERATED FROM PYTHON SOURCE LINES 80-82

.. code-block:: Python

    my_project_bu.get("my_int")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    30000



.. GENERATED FROM PYTHON SOURCE LINES 83-84

By using the ``delete_item`` method, you can also delete an object so that your skore UI does not become cluttered:

.. GENERATED FROM PYTHON SOURCE LINES 86-88

.. code-block:: Python

    my_project_bu.put("my_int_2", 10)








.. GENERATED FROM PYTHON SOURCE LINES 89-91

.. code-block:: Python

    my_project_bu.delete_item("my_int_2")








.. GENERATED FROM PYTHON SOURCE LINES 92-93

You can display all the keys in your project:

.. GENERATED FROM PYTHON SOURCE LINES 95-97

.. code-block:: Python

    my_project_bu.list_item_keys()





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    ['my_int']



.. GENERATED FROM PYTHON SOURCE LINES 98-100

Storing a string
^^^^^^^^^^^^^^^^

.. GENERATED FROM PYTHON SOURCE LINES 102-103

We just stored a integer, now let us store some text using strings!

.. GENERATED FROM PYTHON SOURCE LINES 105-107

.. code-block:: Python

    my_project_bu.put("my_string", "Hello world!")








.. GENERATED FROM PYTHON SOURCE LINES 108-110

.. code-block:: Python

    my_project_bu.get("my_string")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    'Hello world!'



.. GENERATED FROM PYTHON SOURCE LINES 111-112

``my_project_bu.get`` infers the type of the inserted object by default. For example, strings are assumed to be in Markdown format. Hence, you can customize the display of your text:

.. GENERATED FROM PYTHON SOURCE LINES 114-127

.. code-block:: Python

    my_project_bu.put(
        "my_string_2",
        (
            """Hello world!, **bold**, *italic*, `code`

    ```python
    def my_func(x):
        return x+2
    ```
    """
        ),
    )








.. GENERATED FROM PYTHON SOURCE LINES 128-129

Moreover, you can also explicitly tell `skore` the media type of an object, for example in HTML:

.. GENERATED FROM PYTHON SOURCE LINES 131-132

Note: we use ``put_item`` instead of ``put``:

.. GENERATED FROM PYTHON SOURCE LINES 132-139

.. code-block:: Python

    my_project_bu.put_item(
        "my_string_3",
        MediaItem.factory(
            "<p><h1>Title</h1> <b>bold</b>, <i>italic</i>, etc.</p>", media_type="text/html"
        ),
    )








.. GENERATED FROM PYTHON SOURCE LINES 140-141

Note that the media type is only used for the UI, and not in this notebook at hand:

.. GENERATED FROM PYTHON SOURCE LINES 143-145

.. code-block:: Python

    my_project_bu.get("my_string_3")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    b'<p><h1>Title</h1> <b>bold</b>, <i>italic</i>, etc.</p>'



.. GENERATED FROM PYTHON SOURCE LINES 146-147

You can also conveniently use a Python f-string:

.. GENERATED FROM PYTHON SOURCE LINES 149-155

.. code-block:: Python

    x = 2
    y = [1, 2, 3, 4]
    my_project_bu.put(
        "my_string_4", f"The value of `x` is {x} and the value of `y` is {y}."
    )








.. GENERATED FROM PYTHON SOURCE LINES 156-158

Storing many kinds of data
^^^^^^^^^^^^^^^^^^^^^^^^^^

.. GENERATED FROM PYTHON SOURCE LINES 160-161

Python list:

.. GENERATED FROM PYTHON SOURCE LINES 163-166

.. code-block:: Python

    my_list = [1, 2, 3, 4]
    my_project_bu.put("my_list", my_list)








.. GENERATED FROM PYTHON SOURCE LINES 167-168

Python dictionary:

.. GENERATED FROM PYTHON SOURCE LINES 170-176

.. code-block:: Python

    my_dict = {
        "company": "probabl",
        "year": 2023,
    }
    my_project_bu.put("my_dict", my_dict)








.. GENERATED FROM PYTHON SOURCE LINES 177-178

Numpy array:

.. GENERATED FROM PYTHON SOURCE LINES 180-183

.. code-block:: Python

    my_arr = np.random.randn(3, 3)
    my_project_bu.put("my_arr", my_arr)








.. GENERATED FROM PYTHON SOURCE LINES 184-185

Pandas data frame:

.. GENERATED FROM PYTHON SOURCE LINES 187-190

.. code-block:: Python

    my_df = pd.DataFrame(np.random.randn(3, 3))
    my_project_bu.put("my_df", my_df)








.. GENERATED FROM PYTHON SOURCE LINES 191-195

Data visualization
^^^^^^^^^^^^^^^^^^

Note that, in the dashboard, the interactivity of plots is supported, for example for Altair and Plotly.

.. GENERATED FROM PYTHON SOURCE LINES 197-198

Matplotlib figure:

.. GENERATED FROM PYTHON SOURCE LINES 200-213

.. code-block:: Python

    x = np.linspace(0, 2, 100)

    fig, ax = plt.subplots(figsize=(5, 2.7), layout="constrained")
    ax.plot(x, x, label="linear")
    ax.plot(x, x**2, label="quadratic")
    ax.plot(x, x**3, label="cubic")
    ax.set_xlabel("x label")
    ax.set_ylabel("y label")
    ax.set_title("Simple Plot")
    ax.legend()

    my_project_bu.put("my_figure", fig)




.. image-sg:: /auto_examples/images/sphx_glr_plot_02_basic_usage_001.png
   :alt: Simple Plot
   :srcset: /auto_examples/images/sphx_glr_plot_02_basic_usage_001.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 214-215

Altair chart:

.. GENERATED FROM PYTHON SOURCE LINES 217-232

.. code-block:: Python

    num_points = 100
    df_plot = pd.DataFrame(
        {"x": np.random.randn(num_points), "y": np.random.randn(num_points)}
    )

    my_altair_chart = (
        alt.Chart(df_plot)
        .mark_circle()
        .encode(x="x", y="y", tooltip=["x", "y"])
        .interactive()
        .properties(title="My title")
    )

    my_project_bu.put("my_altair_chart", my_altair_chart)








.. GENERATED FROM PYTHON SOURCE LINES 233-243

.. note::
    For Plotly figures, some users reported the following error when running Plotly cells:
    ```
    ValueError: Mime type rendering requires nbformat>=4.2.0 but it is not installed
    ```
    This is a Plotly issue which is documented `here <https://github.com/plotly/plotly.py/issues/3285>`_; to solve it, we recommend installing nbformat in your environment, e.g. with

    .. code:: console

        pip install --upgrade nbformat

.. GENERATED FROM PYTHON SOURCE LINES 245-246

Plotly figure:

.. GENERATED FROM PYTHON SOURCE LINES 248-259

.. code-block:: Python

    df = px.data.iris()
    fig = px.scatter(
        df,
        x=df.sepal_length,
        y=df.sepal_width,
        color=df.species,
        size=df.petal_length
    )

    my_project_bu.put("my_plotly_fig", fig)








.. GENERATED FROM PYTHON SOURCE LINES 260-261

Animated Plotly figure:

.. GENERATED FROM PYTHON SOURCE LINES 263-281

.. code-block:: Python

    df = px.data.gapminder()
    my_anim_plotly_fig = px.scatter(
        df,
        x="gdpPercap",
        y="lifeExp",
        animation_frame="year",
        animation_group="country",
        size="pop",
        color="continent",
        hover_name="country",
        log_x=True,
        size_max=55,
        range_x=[100, 100000],
        range_y=[25, 90],
    )

    my_project_bu.put("my_anim_plotly_fig", my_anim_plotly_fig)








.. GENERATED FROM PYTHON SOURCE LINES 282-283

PIL image:

.. GENERATED FROM PYTHON SOURCE LINES 285-291

.. code-block:: Python

    my_pil_image = PIL.Image.new("RGB", (100, 100), color="red")
    with io.BytesIO() as output:
        my_pil_image.save(output, format="png")

    my_project_bu.put("my_pil_image", my_pil_image)








.. GENERATED FROM PYTHON SOURCE LINES 292-298

Scikit-learn models and pipelines
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

As skore is developed by `Probabl <https://probabl.ai>`_, the spin-off of scikit-learn, skore treats scikit-learn models and pipelines as first-class citizens.

First of all, you can store a scikit-learn model:

.. GENERATED FROM PYTHON SOURCE LINES 300-303

.. code-block:: Python

    my_model = Lasso(alpha=2)
    my_project_bu.put("my_model", my_model)








.. GENERATED FROM PYTHON SOURCE LINES 304-305

You can also store scikit-learn pipelines:

.. GENERATED FROM PYTHON SOURCE LINES 307-312

.. code-block:: Python

    my_pipeline = Pipeline(
        [("standard_scaler", StandardScaler()), ("lasso", Lasso(alpha=2))]
    )
    my_project_bu.put("my_pipeline", my_pipeline)








.. GENERATED FROM PYTHON SOURCE LINES 313-314

Moreover, you can store fitted scikit-learn pipelines:

.. GENERATED FROM PYTHON SOURCE LINES 316-323

.. code-block:: Python

    diabetes = load_diabetes()
    X = diabetes.data[:150]
    y = diabetes.target[:150]
    my_pipeline.fit(X, y)

    my_project_bu.put("my_fitted_pipeline", my_pipeline)








.. GENERATED FROM PYTHON SOURCE LINES 324-325

*Stay tuned for some new features!*


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 1.895 seconds)


.. _sphx_glr_download_auto_examples_plot_02_basic_usage.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_02_basic_usage.ipynb <plot_02_basic_usage.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_02_basic_usage.py <plot_02_basic_usage.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: plot_02_basic_usage.zip <plot_02_basic_usage.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
